task wrapper(type: Wrapper) {
    gradleVersion = '4.3.1'

    doLast() {
        def gradleOpts = "-Xmx2024m"
        def gradleBatOpts = "$gradleOpts -XX:MaxHeapSize=256m"
        File wrapperFile = file("gradlew")
        wrapperFile.text = wrapperFile.text.replace("DEFAULT_JVM_OPTS=", "GRADLE_OPTS=\"$gradleOpts \$GRADLE_OPTS\"\nDEFAULT_JVM_OPTS=")
        File wrapperBatFile = file("gradlew.bat")
        wrapperBatFile.text = wrapperBatFile.text.replace("set DEFAULT_JVM_OPTS=", "set GRADLE_OPTS=$gradleBatOpts %GRADLE_OPTS%\nset DEFAULT_JVM_OPTS=")
    }

}

apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'org.springframework.boot'

sourceCompatibility = 1.8
targetCompatibility = 1.8

buildscript {
    repositories {
        mavenCentral()
        jcenter()
    }
    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:1.5.9.RELEASE")
    }
}

repositories {
    mavenCentral()
    jcenter()
}

dependencies {
    compile("org.springframework.boot:spring-boot-starter-web")
    compile("org.springframework.boot:spring-boot-starter-actuator")
    testCompile("org.springframework.boot:spring-boot-starter-test")
}

war {
    baseName = 'mly-auth'
}

task Task1 {
    doFirst {
        println "Task1 : First I do this."
    }

    doLast {
        println "Task1 : Then I do this"
    }
}

task Task2 {
    description "This is a task 2"
    dependsOn Task1

    doFirst {
        println "Task2 : First I do this."
    }

    doLast {
        println "Task2 : Then I do this"
    }
}

task Task3 {
    doLast {
        println "Task 3"
    }
}

Task2.finalizedBy Task3
